{% extends 'base.html' %}
{% load static i18n %}

{% block title %}{% trans "FAQ" %} - AL BURAQ GROUP{% endblock %}

{% block extra_css %}
<style>
    .faq-item {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        margin-bottom: 1rem;
        border: 1px solid rgba(255, 255, 255, 0.05);
        overflow: hidden;
    }

    .faq-question {
        padding: 1.25rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .faq-question:hover {
        background: var(--bg-card-hover);
    }

    .faq-question h4 {
        margin: 0;
        font-size: 1rem;
        font-weight: 500;
    }

    .faq-question i {
        color: var(--gold-light);
        transition: transform 0.3s ease;
    }

    .faq-item.active .faq-question i {
        transform: rotate(180deg);
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
    }

    .faq-answer-inner {
        padding: 0 1.5rem 1.25rem;
        color: var(--text-secondary);
        line-height: 1.7;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero -->
<section style="padding: 150px 0 80px; background: linear-gradient(180deg, var(--bg-darker) 0%, var(--bg-dark) 100%);">
    <div class="container text-center">
        <h1 class="mb-md" data-aos="fade-up">{% trans "Frequently Asked" %} <span class="text-gold">{% trans "Questions" %}</span></h1>
        <p style="color: var(--text-secondary); max-width: 600px; margin: 0 auto;" data-aos="fade-up"
            data-aos-delay="100">
            {% trans "Find answers to common questions about our services" %}
        </p>
    </div>
</section>

<!-- FAQ Content -->
<section class="section">
    <div class="container" style="max-width: 900px;">
        {% for category in categories %}
        <div class="mb-2xl" data-aos="fade-up">
            <h3 class="text-gold mb-lg"><i class="fas fa-folder"></i> {{ category.name }}</h3>
            {% for faq in category.faqs.all %}
            <div class="faq-item">
                <div class="faq-question">
                    <h4>{{ faq.question }}</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-inner">{{ faq.answer|linebreaks }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endfor %}

        {% if uncategorized_faqs %}
        <div class="mb-2xl" data-aos="fade-up">
            <h3 class="text-gold mb-lg"><i class="fas fa-question-circle"></i> {% trans "General Questions" %}</h3>
            {% for faq in uncategorized_faqs %}
            <div class="faq-item">
                <div class="faq-question">
                    <h4>{{ faq.question }}</h4>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    <div class="faq-answer-inner">{{ faq.answer|linebreaks }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if not categories and not uncategorized_faqs %}
        <div class="text-center" style="padding: 4rem;">
            <i class="fas fa-question-circle"
                style="font-size: 4rem; color: var(--text-muted); margin-bottom: 1.5rem;"></i>
            <h3 style="color: var(--text-muted);">{% trans "No FAQs available yet" %}</h3>
            <p style="color: var(--text-muted); margin-bottom: 2rem;">{% trans "Check back soon or contact us directly." %}</p>
            <a href="{% url 'pages:contact' %}" class="btn btn-primary">{% trans "Contact Us" %}</a>
        </div>
        {% endif %}
    </div>
</section>

<!-- Still Have Questions -->
<section class="section" style="background: var(--bg-darker);">
    <div class="container">
        <div class="card card-glass" style="padding: 3rem; text-align: center; max-width: 700px; margin: 0 auto;">
            <i class="fas fa-headset" style="font-size: 3rem; color: var(--gold-light); margin-bottom: 1.5rem;"></i>
            <h3 class="mb-md">{% trans "Still have questions?" %}</h3>
            <p style="color: var(--text-secondary); margin-bottom: 2rem;">
                {% trans "Our team is here to help. Reach out to us anytime!" %}
            </p>
            <div class="flex justify-center gap-md" style="flex-wrap: wrap;">
                <a href="https://wa.me/{{ COMPANY_WHATSAPP|slice:'1:' }}" class="btn btn-primary">
                    <i class="fab fa-whatsapp"></i> {% trans "WhatsApp" %}
                </a>
                <a href="mailto:{{ COMPANY_EMAIL }}" class="btn btn-secondary">
                    <i class="fas fa-envelope"></i> {% trans "Email Us" %}
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // initFaqAccordion(); // Removed as it is already initialized in main.js
</script>
{% endblock %}